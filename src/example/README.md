# React SSE Demo с useServerSentEvent

[English](./README.en.md)

Это демонстрационное React приложение, которое показывает работу хука `useServerSentEvent` из родительской папки.

## Файлы

- `server.js` - Сервер на Bun, который отправляет случайные числа через SSE
- `client.tsx` - React приложение с использованием хука useServerSentEvent (полная версия)
- `client-simple.tsx` - Упрощенная версия React приложения с встроенным хуком
- `react-demo.html` - HTML файл для запуска упрощенной версии
- `index.html` - HTML файл для запуска полной версии
- `start.sh` - Скрипт для запуска сервера

## Запуск

1. **Запустите сервер:**

   ```bash
   cd src/example
   bun server.js
   # или
   ./start.sh
   ```

2. **Откройте в браузере:**
   - Основная страница: <http://localhost:3000>
   - React приложение (встроенное): <http://localhost:3000/react>
   - React приложение (отдельный файл): откройте `react-demo.html` в браузере

## Функциональность

### React приложение (встроенное в сервер `/react`)

- Подключается к `localhost:3000/events` через Server-Sent Events
- Использует упрощенную версию хука `useServerSentEvent`
- Отображает получаемые числовые значения в реальном времени
- Показывает статус подключения (подключено/отключено)
- Отображает ошибки подключения
- Позволяет очистить список сообщений

### React приложение (отдельный файл `client-simple.tsx`)

- Полнофункциональная версия с TypeScript
- Использует упрощенную реализацию хука
- Может быть запущена независимо от сервера
- Поддерживает все функции встроенной версии

### Встроенный JavaScript интерфейс (`/`)

- Простой HTML/JavaScript интерфейс для сравнения
- Кнопки подключения/отключения
- Отображение сообщений в реальном времени

## SSE Endpoint

Сервер отправляет случайные числа каждую секунду на endpoint `/events`:

```sh
data: 123

data: 456

data: 789
```

## Особенности хука useServerSentEvent

- Автоматическое подключение при монтировании компонента
- Автоматическое отключение при размонтировании
- Обработка ошибок подключения
- Состояние подключения (isConnected)
- Поддержка начального состояния
- Типизация TypeScript
- Обработка как JSON, так и простых числовых значений

## Технологии

- React 18
- TypeScript
- Server-Sent Events (SSE)
- Bun (сервер)
- Babel (для JSX в браузере)

## Структура проекта

```txt
src/example/
├── server.js          # Сервер с SSE endpoint
├── client.tsx         # Полная версия React приложения
├── client-simple.tsx  # Упрощенная версия с встроенным хуком
├── react-demo.html    # HTML для упрощенной версии
├── index.html         # HTML для полной версии
├── start.sh           # Скрипт запуска
└── README.md          # Документация
```

## Использование

1. Запустите сервер командой `bun server.js`
2. Откройте <http://localhost:3000/react> для встроенной версии
3. Или откройте файл `react-demo.html` в браузере для отдельной версии
4. Наблюдайте за получением данных в реальном времени
5. Используйте кнопку "Очистить сообщения" для очистки истории
